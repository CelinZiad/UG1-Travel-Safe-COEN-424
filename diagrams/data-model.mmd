classDiagram
  class Area {
    +areaId: string
    +name: string
    +geometry: GeoJSON   %% borough polygon (from /ref)
    +parent?: string     %% future: borough -> city
    +source: string      %% provenance/version of REF
  }

  class Incident {
    +id: string
    +occurredAt: datetime
    +category: string
    +lon: number
    +lat: number
    +year: string        %% partition "YYYY"
    +month: string       %% partition "MM"
    +boroughCode?: string
    +boroughName?: string
    +binId?: string      %% optional grid id
    +source: string
  }

  class Accident {
    +id: string
    +occurredAt: datetime
    +severity: string
    +lon: number
    +lat: number
    +year: string
    +month: string
    +boroughCode?: string
    +boroughName?: string
    +binId?: string
    +source: string
  }

  class ScoreRun {
    +runId: string
    +startedAt: datetime
    +endedAt: datetime
    +inputs: string      %% S3 paths / code version
    +outputs: string     %% S3 paths / table
    +status: string
    +rowCounts: string   %% metrics JSON
  }

  class AreaScore {
    +areaId: string
    +period: string      %% YYYY-MM
    +safetyScore: number
    +color: string       %% red|yellow|green
    +crimes: int
    +accidents: int
    +updatedAt: datetime
    +runId: string
  }

  Incident --> Area : "many to 1 (via boroughCode)"
  Accident --> Area : "many to 1 (via boroughCode)"
  AreaScore --> Area : "many to 1"
  AreaScore --> ScoreRun : "many to 1"
